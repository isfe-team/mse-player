<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8"/>
    </head>
    <body>
      <audio id="playpcm" controls></audio>
      <input type="file" name="pic" id="pic" accept="" multiple class="file-init" />
      <script src="./lame.all.js"></script>
      <script type="module">
        import msePlayer from '../src/MSEPlayer.js'
        import wavToMp3 from '../src/wavToMp3.js'
        // 支持播放wav格式音频（transformer传wav转mp3方法时，可同时传包括wav和MP3一起的整合音频)
        const $audio = document.querySelector('#playpcm')
        const $file = document.querySelector('#pic')
        let player =  new msePlayer({ onError: console.log })
        $audio.src = URL.createObjectURL(player.mediaSource)
        $file.addEventListener('change', function (event) {
          const file = event.target.files
          player.appendFiles({ files: file, transformer: wavToMp3 })
        })
    </script>
  </body>
</html>
